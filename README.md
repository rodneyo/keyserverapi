StoneMor Security API
=======================

Introduction
------------
This a somewhat RESTful API is accessible to authorized clients only and provides
credential and role information. The API is built with Zend
Framework 2.1

Installation
------------
 - Host:    keyserver.stonemor.com
 - OS:      Linux (CentOS)
 - API url: keyserver.stonemor.com

Current Implementations
-----------------------
DIPS:       (Deposit, Invoice, PCard, Scanning)
Corpstruct: Used for role authorization 
Docscan:    Used for role authorization
CSI:        Used for role authorization

 -  End points
    - roles/[username]/[appname]
    - roles/[location]/[username]
    - roles/allusers/[appname]
    - locations/allusers/[appname]
 - Returns
    - JSON object containing a list of roles from Active Directory
    - JSON object containing a list of approvers from MySQL database
    - JSON object containing a list of all users, email addresses and
      display names (dump from Active Directory)

API Key Database
-----------------
Any client accessing the API must have a valid API key assigned.  These keys
are maintained in a mysql database on keyserver.  Currently, there is no
frontend application for maintaining the information.  Each client must include
a custom header containing the specific API assigned. 

 - Database:    api_key
 - Header:      x-stonemorapi

Unique keys can be generated by running the following command on keyserver.

```bash
./apikey-gen
```

FireFox Chrome Plugins
----
I found the these browser plugins to be very helpful for debugging and testing
[REST Client](http://restclient.net)
[REST Console](http://restconsole.com)

>  With these plugins you can directly test the different endpoints, insert custom headers,
>  inspect returning JSON and a host of other things.

Upgrading ZF2 vendor library
----------------------------
Sometimes it is a good idea to upgrade the ZF2 to bring the latest
stable updates, bug fixes and security upate.  ZF2 utilized the [composer](http://getcomposer.org)
package dependency manager.  Below are the steps to upgrade a ZF2
library

 - On a development server or latop
   - cd into the project root directory
   - php composer.phar update
 
 - Once the project is updated deploy project to test.
 - All is well deploy to production
